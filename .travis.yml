language: node_js
node_js: node
env:
  matrix:
  - TEST_DIR=client
  - TEST_DIR=server
  global:
  - secure: YOAJruVKmOHr9oDHJaC97h4TD0M8xM6VJ8LSxh98QDd4Pf0/SUHxkQtm01UD2JdugSmZyFSCIfspf0P0vnc7c9wPOZwSiNKZKoyxbmQCCPyyH/zK0IXNNUxnQsx7rHRhhpvh+34O1zhGujUQjI3+gYT5IZg+/nek/s1aLtQf/+vQ75xPSS2oBKysU+MrWUEzNgXFsUnvF9esgENEAp0wdyZ/sZapZLNIXfrZVgpewl2u/GfVknlnm/mEQsj62DF6qozdM1k2q4JWIBdoRIbmpglryFXEDHZ33Bury6M2R42wG2fhO3uLA1cM9cp6sjk37aDBOpx0oa3J9l38W/ue6lbI4HIcZDvpD0G7zxKe/tXx24II5CAcausOLlskllvvifhmolupLhtvMxAm7QFsWUygM+sK99zYnVFlIL7PHokB6dN08/CptUi3slA023g8OvYYOotuoZ0ZEeINwdMhZV5KA3ejp3PgueHDQHnzUZW+RsOK8VgGdST8Gv53wQZkbKCbcMpql40Eq2nfVS1bh+ImWVP651ul3glK7MlNKI+MuxeCJSc+7dYIbgmimh8uJdag4UBR+UMcrnWeUUDrt+dkn7GG0P+eLMrdsn898K/MlVrD2l6Y64Mzo/i01Xtl2NxUnXZ7OsWsUopQOEo/fFCCLpJd/mOsJ33pC4iyD8M=
  - secure: dYbvsVAiz1w5NUgoH1F3UU1Oqp4uD3MD90/DG9zuLpz8YD9alifN+7Wv5VYSoMa/VeEO2OKnNv6mG1OHttfAyvuqF2Id39Pk+YT+U+VsmHEl0CSa2txYSiQOD0D99+TL2hAkMNPx2qG6qIM94iAawJapFzJgTf/YFS8/OLIZBh8TEMmW1Vp6y4sPybTjAGU5eFdbMaA2qB4R+FGqfEe0+GAgyEX2XR3vOqbqewuR4KkfN3/JCEz+bRkJl+oAxkCy1UDEqDeKwis+4pCtYqH/6LN0i67QUnIJYhrXeszlxokWgPGRfYXy127XHFCpaTAncqegwWI6e261aTJ35iMW7CLgCqIspUi6LMJyA0KjWXXdqYh/cnFAC1imFowLMgWxOSMr4kABO1dAQzAV5WLL32lbxSN+4D5+BNMumoZgSWmg3/TVuCL0opxJF6i5kVQygYXyrCVRYNWOmb+Qnd4uwCOo9OdujuD4gBs5WUV7we62j4RQPj2i2OAN6tLAgZBuz3C5SYpszw0JWqyogskRsJ5x+WN7AqRgWDJlHLTJUaptZJAybu0kdzixCVKXtb+mOwzXc6XRFcZKIkTIqDCcNFEwflvc6DeKfc80NocEKClXqDnkb89s3zr+pRJ3ETiJ8r6KicWXK3ObaXBZWQy3vI69aav3kwxJToaZ9Mjkgmk=
  - secure: T78DKbx5NnakWTzSanAKf3FRDV36Wjmvf+XLoY2ZXKga/sWwTG367lN1gHFSeNS+Wilz6bwsuyh86AjJu35k/i/WdUeOM3ZkeHg88g+J7BSD/2vcFPhK7km7maxqf1PLNAo9IJw4uqEovw1NDRPw8wfLGQvsDp5jmpxrEQCYKLGCfEYARSNI/GZaqso+0kB2WHRahn34nKBbVzFdOhXDl1D8nC18pFsWs23pRNZCSH+erjT3j3nJWJHQJ5JIqFiTNRMqhANPE4pyJwcTY/Ve+LihSql+jQB8R4L0NyCQuEw6Op81rowaseB8XrVPhNuu3NWXrKqN0PEU6/jvJHIbeqO8zQt2cArEJOxFPDnrQZ3KM4Opo8OQ5U+AF9mMW8WKZhUdzXhVKhuAagrqy1SDjjWv+WOA5iXj8CQI21/SlZBC9dpQq+QMED0L57PXsHUQp4rN9wGTH/IhzvF6Y7Q9hBp6rDIJKF91IjHD2zns4TUR+uFUMbQ3p8Ft26y2OoRuaxllszTqhLEY3i4b9ZjNxsAWEHm5Czvq1NgHM4zrqUNPlvR5x5vG4n/MJrNQUTSXYw/cfNlFxfsm9iRlJyRmocaY6gFus5Tg74YOep6KSH9PEVNFtaJT+3sOEeI1ErALtgA1E1k7G6sHb7CQuAp4imZc6YCDp97J/S3dmEhly/s=
script: cd $TEST_DIR && npm install && npm test
deploy:
  provider: script
  skip_cleanup: true
  script: npm run deploy
